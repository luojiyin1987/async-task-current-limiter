{"version":3,"file":"index.min.js","sources":["index.js"],"sourcesContent":["function t(){return{}.toString.call({[Symbol.toStringTag]:\"EventEmitterTarget\"})}function e(t){if(\"string\"!=typeof t&&\"symbol\"!=typeof t)throw new TypeError(\" EVENTNAME expected: string | symbol;but invalid :\"+t)}function n(t){if(\"function\"!=typeof t)throw new TypeError(\" EVENTLISTENER expected: (event?: any) => void;but invalid:\"+t)}function r(){const r=new Map,o=new WeakMap;function i(t){let e=r.get(t);return e||(e=new Set,r.set(t,e)),e}function u(t){e(t),r.has(t)&&i(t).clear()}function c(t,n){e(t),r.has(t)&&i(t).forEach(t=>{Promise.resolve().then(()=>{t(n)})})}function s(t,r){e(t),n(r),i(t).add(r)}function f(t,e){i(t).delete(e)}function l(t,r){e(t),n(r),f(t,r),function(t,e){const n=i(t);let r=o.get(e);r&&n.delete(r)}(t,r)}function a(){return[...r].map(([t,e])=>[t,[...e]])[Symbol.iterator]()}return{[Symbol.toPrimitive]:t,[Symbol.toStringTag]:\"EventEmitterTarget\",[Symbol.iterator]:a,entries:a,listenerCount:function(t){return e(t),r.has(t)?i(t).size:0},clear:u,removeAllListeners:u,on:s,addListener:s,off:l,removeListener:l,once:function(t,r){e(t),n(r);let i=!1,u=o.get(r);if(!u){const e=n=>{f(t,e),f(t,r),i||(i=!0,r(n))};u=e,o.set(r,u)}f(t,r),s(t,u)},emit:c,dispatch:c,eventNames:function(){return[...r.keys()]},listeners:function(t){return e(t),r.has(t)?[...i(t)]:[]}}}const o=(t=>{var e=Symbol(),n=new Function(\"return async()=>{}\")()();function o(){const t=r();return this&&this instanceof o?(Object.assign(this,t),this):Reflect.construct(o,[])}return Reflect.set(o,e,n),o})();function i(t){if(!(\"number\"==typeof t&&t>0&&1/0>t))throw TypeError(\" MAX expected: number;but invalid:\"+t);const e=t,n=new Map;let r=0,i=0;const u=o(),c=[];let s=!0;function f(){const t=r;if(!s)return;if(t>=c.length)return void(s=!1);if(\"full\"===a())return void(s=!1);!function(){if(!(i<e))throw Error();i++,h()}();const o=c[t];if(!o)throw Error();const[u,l]=o,m=Promise.resolve(Reflect.apply(u,void 0,l)),g=()=>{const e=n.get(t);if(!e)throw new Error;e.resolve(m),function(){if(i-1<0)throw Error();i--,h()}(),c[t]=void 0,n.delete(t)};m.then(g,g),r++,Promise.resolve().then(()=>{f()})}function l(t){let e=c.length;c.push(t),\"free\"===a()&&(s=!0,f());const r=function(){let t=t=>{},e=t=>{};return{promise:new Promise((n,r)=>{t=n,e=r}),reject:e,resolve:t}}();return n.set(e,r),Promise.resolve(r.promise)}function a(){return i<e?\"free\":\"full\"}u.on(\"free\",()=>{s=!0,f()}),u.on(\"full\",()=>{s=!1});const m={[Symbol.toStringTag]:\"AsyncCurrentLimiter\",asyncwrap:function(t){return async function(...e){return await l([t,e])}},status:a,limiter:{get max(){return e},get current(){return i}},queue:{get max(){return c.length},get current(){return r}},target:u};function h(){const{queue:t,limiter:n}=m,r={status:a(),queue:{max:t.max,current:t.current},limiter:{max:n.max,current:n.current}};i>=e?u.emit(\"full\",r):u.emit(\"free\",r)}return m}var u=(()=>{var t=new Function(\"return async()=>{}\")()(),e=Symbol();function n(t){const e=i(t);return this&&this instanceof n?(Object.assign(this,e),this):Reflect.construct(n,[t])}return Reflect.set(n,e,t),n})();export default u;\n//# sourceMappingURL=index.js.map\n"],"names":["t","toString","call","Symbol","toStringTag","e","TypeError","n","o","Map","r","WeakMap","i","get","Set","set","c","has","clear","s","forEach","Promise","resolve","then","u","add","f","delete","a","l","map","iterator","toPrimitive","entries","listenerCount","size","removeAllListeners","on","addListener","off","removeListener","once","emit","dispatch","eventNames","keys","listeners","Function","this","Object","assign","Reflect","construct"],"mappings":"AAAA,SAASA,UAAU,GAAGC,SAASC,KAAK,EAAEC,OAAOC,aAAa,uBAAuB,SAASC,EAAEL,MAAM,iBAAiBA,GAAG,iBAAiBA,EAAE,MAAM,IAAIM,UAAU,qDAAqDN,GAAG,SAASO,EAAEP,MAAM,mBAAmBA,EAAE,MAAM,IAAIM,UAAU,8DAA8DN,GAAG,SAASQ,UAAUA,EAAE,IAAIC,IAAIC,EAAE,IAAIC,iBAAiBC,EAAEZ,OAAOK,EAAEG,EAAEK,IAAIb,UAAUK,IAAIA,EAAE,IAAIS,IAAIN,EAAEO,IAAIf,EAAEK,IAAIA,WAAWW,EAAEhB,GAAGK,EAAEL,GAAGQ,EAAES,IAAIjB,IAAIY,EAAEZ,GAAGkB,iBAAiBC,EAAEnB,EAAEO,GAAGF,EAAEL,GAAGQ,EAAES,IAAIjB,IAAIY,EAAEZ,GAAGoB,QAAQpB,IAAIqB,QAAQC,UAAUC,KAAK,KAAKvB,EAAEO,gBAAgBiB,EAAExB,EAAEQ,GAAGH,EAAEL,GAAGO,EAAEC,GAAGI,EAAEZ,GAAGyB,IAAIjB,YAAYkB,EAAE1B,EAAEK,GAAGO,EAAEZ,GAAG2B,OAAOtB,YAAYuB,EAAE5B,EAAEQ,GAAGH,EAAEL,GAAGO,EAAEC,GAAGkB,EAAE1B,EAAEQ,GAAG,SAASR,EAAEK,SAASE,EAAEK,EAAEZ,OAAOQ,EAAEE,EAAEG,IAAIR,GAAGG,GAAGD,EAAEoB,OAAOnB,GAAtD,CAA0DR,EAAEQ,YAAYqB,UAAU,IAAIrB,GAAGsB,IAAI,EAAE9B,EAAEK,KAAK,CAACL,EAAE,IAAIK,KAAKF,OAAO4B,kBAAkB,EAAE5B,OAAO6B,aAAahC,GAAGG,OAAOC,aAAa,sBAAsBD,OAAO4B,UAAUF,EAAEI,QAAQJ,EAAEK,cAAc,SAASlC,UAAUK,EAAEL,GAAGQ,EAAES,IAAIjB,GAAGY,EAAEZ,GAAGmC,KAAK,GAAGjB,MAAMF,EAAEoB,mBAAmBpB,EAAEqB,GAAGb,EAAEc,YAAYd,EAAEe,IAAIX,EAAEY,eAAeZ,EAAEa,KAAK,SAASzC,EAAEQ,GAAGH,EAAEL,GAAGO,EAAEC,OAAOI,GAAAA,EAAKI,EAAEN,EAAEG,IAAIL,OAAOQ,EAAE,OAAOX,EAAEE,IAAImB,EAAE1B,EAAEK,GAAGqB,EAAE1B,EAAEQ,GAAGI,IAAIA,GAAAA,EAAKJ,EAAED,KAAKS,EAAEX,EAAEK,EAAEK,IAAIP,EAAEQ,GAAGU,EAAE1B,EAAEQ,GAAGgB,EAAExB,EAAEgB,IAAI0B,KAAKvB,EAAEwB,SAASxB,EAAEyB,WAAW,iBAAiB,IAAIpC,EAAEqC,SAASC,UAAU,SAAS9C,UAAUK,EAAEL,GAAGQ,EAAES,IAAIjB,GAAG,IAAIY,EAAEZ,IAAI,KAAK,MAAMU,EAAE,CAACV,QAAQK,EAAEF,SAASI,EAAE,IAAIwC,SAAJ,qBAAA,EAAA,YAAgDrC,UAAUV,EAAEQ,WAAWwC,MAAMA,gBAAgBtC,GAAGuC,OAAOC,OAAOF,KAAKhD,GAAGgD,MAAMG,QAAQC,UAAU1C,EAAE,WAAWyC,QAAQpC,IAAIL,EAAEL,EAAEE,GAAGG,GAApM,GAAA"}